<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1791" height="1188"><desc>participant%20%22Identity%20Propagation%20Service%20(IPS)%22%20as%20IPS%0Aparticipant%20%22Client%22%20as%20Client%0Aparticipant%20%22Relying%20Party%20(RP)%22%20as%20RP%0A%0Abottomparticipants%0A%0Anote%20over%20IPS%3AIPS%3A%5Cn%E2%80%A2%20must%20support%20RFC%208705%5Cn%E2%80%A2%20acts%20as%20a%20Relying%20Party%20in%20respect%20of%20the%20IdP%20in%20order%20to%20obtain%5Cn%20%20an%20access_token_with_user_claims%5Cn%E2%80%A2%20is%20registered%20at%20the%20IdP%20as%20a%20confidential%20client%5Cn%E2%80%A2%20is%20part%20of%20the%20STS%20that%20supports%20the%20Token%20Exchange%20extension%20of%20OAuth%202.0%5Cn%E2%80%A2%20publishes%20its%20metadata%20on%20a%20URL%20%2F.well-known%2Foauth-authorization-server%5Cn%0Anote%20over%20Client%3AClient%3A%5Cn%E2%80%A2%20must%20support%20RFC%208705%5Cn%E2%80%A2%20acts%20as%20a%20Relying%20Party%20in%20respect%20of%20the%20IPS%20in%20order%20to%20obtain%5Cn%20%20an%20access_token_with_user_claims%5Cn%E2%80%A2%20is%20registered%20at%20the%20IPS%20as%20a%20confidential%20client%5Cn%0Anote%20over%20RP%3ARP%3A%5Cn%E2%80%A2%20must%20support%20RFC%208705%5Cn%E2%80%A2%20uses%20the%20information%20in%20the%20assertion%20to%20identify%20the%20subscriber%5Cn%20%20and%20makes%20authorization%20decisions%20using%20a%20local%20ABAC%20engine.%0AIPS%3C-Client%3A1.%20Send%20an%20HTTP%20request%20to%20exchange%20the%20access_token_with_user_claims%5Cn%20%20%20%20for%20an%20access%20token%20with%20changed%20aud%20claim%5Cn%20%20%20%20%E2%80%A2%20grant_type%20%3D%20token-exchange%5Cn%20%20%20%20%E2%80%A2%20resource%20%3D%20a%20target%20RP%20URI%5Cn%20%20%20%20%E2%80%A2%20requested_token_type%20%3D%20urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Aaccess_token%5Cn%20%20%20%20%E2%80%A2%20subject_token%20%3D%20access_token_with_user_claims%5Cn%20%20%20%20%E2%80%A2%20subject_token_type%20%3D%20urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Aaccess_token%0AIPS-%3EIPS%3A2.%20Authorization%20decision%3A%5Cn%20%20%201.%20evaluate%20the%20resource%20parameter%5Cn%20%20%202.%20verify%20the%20subject_token%20signature%5Cn%20%20%203.%20evaluate%20the%20subject_token%20claims%0A%0AIPS-%3EIPS%3A3.%20IPS%20generates%20an%20access_token%20with%20these%20claims%3A%5Cn%20%20%20%20%7Biss%2C%20aud%2C%20sub%2C%20exp%2C%20nbf%7D%5Cn%20%20%20%20%E2%80%A2%20iss%20is%20the%20URI%20that%20identifies%20who%20issues%20the%20access_token%5Cn%20%20%20%20%E2%80%A2%20aud%20identifies%20the%20target%20service%20and%20it%20is%20the%20aud%20value%20from%5Cn%20%20%20%20%20%20the%20resource%20parameter%5Cn%20%20%20%20%E2%80%A2%20sub%20identifies%20the%20principal%20by%20an%20email%20address%20that%20is%20extracted%20from%5Cn%20%20%20%20%20%20the%20access_token_with_user_claims%5Cn%20%20%20%20%E2%80%A2%20exp%2C%20nbf%20are%20the%20standard%20JWT%20claims%0AClient%3C-IPS%3A4.%20Return%20the%20access_token%0A%0AClient-%3ERP%3A5.%20Send%20an%20HTTP%20request%20to%20the%20RP%20with%20the%20access_token%20in%20the%20header%0ARP-%3ERP%3A6.%20Authorization%20decision%5Cn%20%20%20%201.%20verify%20the%20access_token%20signature%5Cn%20%20%20%202.%20evaluate%20claims%0ARP-%3EClient%3A7.%20Return%20the%20HTTP%20response%2C%20typically%20with%20200%2C%20201%20status%20code%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1791" height="1188"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 312.4661143882031 50.815047804 L 312.4661143882031 1134.969925284" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.0758700022656 50.815047804 L 916.0758700022656 1134.969925284" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.6189141905468 50.815047804 L 1479.6189141905468 1134.969925284" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 172.88911283091014 10.253481456000003 L 452.0431159454961 10.253481456000003 L 452.0431159454961 50.815047804 L 172.88911283091014 50.815047804 L 172.88911283091014 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="189.24944721291013" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Identity Propagation Service (IPS)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 878.4655356202655 10.253481456000003 L 953.6862043842656 10.253481456000003 L 953.6862043842656 50.815047804 L 878.4655356202655 50.815047804 L 878.4655356202655 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="894.8258700022656" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1397.5169111073749 10.253481456000003 L 1561.7209172737187 10.253481456000003 L 1561.7209172737187 50.815047804 L 1397.5169111073749 50.815047804 L 1397.5169111073749 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1413.877245489375" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Relying Party (RP)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 172.88911283091014 1134.969925284 L 452.0431159454961 1134.969925284 L 452.0431159454961 1175.531491632 L 172.88911283091014 1175.531491632 L 172.88911283091014 1134.969925284 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="189.24944721291013" y="1160.4528424320001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Identity Propagation Service (IPS)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 878.4655356202655 1134.969925284 L 953.6862043842656 1134.969925284 L 953.6862043842656 1175.531491632 L 878.4655356202655 1175.531491632 L 878.4655356202655 1134.969925284 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="894.8258700022656" y="1160.4528424320001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1397.5169111073749 1134.969925284 L 1561.7209172737187 1134.969925284 L 1561.7209172737187 1175.531491632 L 1397.5169111073749 1175.531491632 L 1397.5169111073749 1134.969925284 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1413.877245489375" y="1160.4528424320001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Relying Party (RP)</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 80.97234620400002 L 603.8221198964062 80.97234620400002 L 617.3929041764062 94.54313048400002 L 617.3929041764062 221.20378376400004 L 7.5393246000000005 221.20378376400004 L 7.5393246000000005 80.97234620400002 M 603.8221198964062 80.97234620400002 L 603.8221198964062 94.54313048400002 L 617.3929041764062 94.54313048400002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="102.08245508400003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IPS:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="117.16110428400003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• must support RFC 8705</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="132.23975348400003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• acts as a Relying Party in respect of the IdP in order to obtain</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="147.31840268400003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  an access_token_with_user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="162.39705188400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• is registered at the IdP as a confidential client</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="177.47570108400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• is part of the STS that supports the Token Exchange extension of OAuth 2.0</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="192.55435028400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• publishes its metadata on a URL /.well-known/oauth-authorization-server</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.64943347999997" y="207.63299948400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 662.932420668164 243.82175756400005 L 1155.648535056367 243.82175756400005 L 1169.219319336367 257.39254184400005 L 1169.219319336367 353.89589672400007 L 662.932420668164 353.89589672400007 L 662.932420668164 243.82175756400005 M 1155.648535056367 243.82175756400005 L 1155.648535056367 257.39254184400005 L 1169.219319336367 257.39254184400005" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="264.9318664440001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="280.01051564400007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• must support RFC 8705</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="295.08916484400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• acts as a Relying Party in respect of the IPS in order to obtain</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="310.167814044" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  an access_token_with_user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="325.246463244" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• is registered at the IPS as a confidential client</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="684.042529548164" y="340.32511244399996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1221.950470959961 376.513870524 L 1723.7165731411328 376.513870524 L 1737.2873574211328 390.084654804 L 1737.2873574211328 456.43071128400004 L 1221.950470959961 456.43071128400004 L 1221.950470959961 376.513870524 M 1723.7165731411328 376.513870524 L 1723.7165731411328 390.084654804 L 1737.2873574211328 390.084654804" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1243.0605798399608" y="397.623979404" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RP:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1243.0605798399608" y="412.702628604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• must support RFC 8705</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1243.0605798399608" y="427.78127780399996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">• uses the information in the assertion to identify the subscriber</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1243.0605798399608" y="442.8599270039999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  and makes authorization decisions using a local ABAC engine.</text></g><g><g><rect fill="white" stroke="none" x="330.3091826082031" y="479.04868508400006" width="544.590245150625" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="494.1273342840001" width="346.3736008635156" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="509.20598348400006" width="255.15692605882813" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="524.284632684" width="233.54025735765626" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="539.363281884" width="567.9236191740625" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="554.441931084" width="389.8402756682031" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.3091826082031" y="569.520580284" width="546.9736069670313" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="492.6194693640001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Send an HTTP request to exchange the access_token_with_user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="507.6981185640001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    for an access token with changed aud claim</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="522.776767764" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • grant_type = token-exchange</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="537.855416964" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • resource = a target RP URI</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="552.934066164" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • requested_token_type = urn:ietf:params:oauth:token-type:access_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="568.012715364" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • subject_token = access_token_with_user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.57097998820313" y="583.091364564" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • subject_token_type = urn:ietf:params:oauth:token-type:access_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.0758700022656 589.1228242440001 L 324.8808688962031 589.1228242440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(312.4661143882031,589.1228242440001) translate(-312.4661143882031,-589.1228242440001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 325.0316553882031 582.8400537440001 L 312.4661143882031 589.1228242440001 L 325.0316553882031 595.405594744 Z"/></g></g><g><g><rect fill="white" stroke="none" x="330.30918260820306" y="611.740798044" width="191.60692300707032" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="626.819447244" width="280.0902756682031" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="641.898096444" width="287.39026346117186" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="656.976745644" width="287.85693826585936" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="625.311582324" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. Authorization decision:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="640.390231524" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   1. evaluate the resource parameter</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="655.468880724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   2. verify the subject_token signature</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="670.547529924" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   3. evaluate the subject_token claims</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 312.4661143882031 676.5789896040001 L 372.7807111882031 676.5789896040001 L 372.7807111882031 696.1812335640001 L 324.8808688962031 696.1812335640001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(312.4661143882031,696.1812335640001) translate(-312.4661143882031,-696.1812335640001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 325.0316553882031 689.8984630640001 L 312.4661143882031 696.1812335640001 L 325.0316553882031 702.464004064 Z"/></g></g><g><g><rect fill="white" stroke="none" x="330.30918260820306" y="718.799207364" width="387.9402512541406" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="733.877856564" width="202.99025430589845" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="748.956505764" width="453.79025735765623" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="764.035154964" width="479.29025735765623" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="779.1138041639999" width="206.90692605882813" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="794.1924533639999" width="549.4402817717188" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="809.2711025639999" width="291.4069260588281" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="330.30918260820306" y="824.3497517639998" width="307.57358255296873" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="732.369991644" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. IPS generates an access_token with these claims:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="747.448640844" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    {iss, aud, sub, exp, nbf}</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="762.527290044" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • iss is the URI that identifies who issues the access_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="777.605939244" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • aud identifies the target service and it is the aud value from</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="792.6845884439999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      the resource parameter</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="807.7632376439999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • sub identifies the principal by an email address that is extracted from</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="822.8418868439999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      the access_token_with_user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="332.5709799882031" y="837.9205360439998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    • exp, nbf are the standard JWT claims</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 312.4661143882031 843.9519957240001 L 372.7807111882031 843.9519957240001 L 372.7807111882031 863.5542396840001 L 324.8808688962031 863.5542396840001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(312.4661143882031,863.5542396840001) translate(-312.4661143882031,-863.5542396840001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 325.0316553882031 857.2714691840001 L 312.4661143882031 863.5542396840001 L 325.0316553882031 869.8370101840001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="512.7175306916993" y="886.172213484" width="203.10692300707032" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="514.9793280716992" y="899.742997764" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Return the access_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 312.4661143882031 905.7744574440001 L 903.6611154942656 905.7744574440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(916.0758700022656,905.7744574440001) translate(-916.0758700022656,-905.7744574440001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 903.5103290022655 899.4916869440001 L 916.0758700022656 905.7744574440001 L 903.5103290022655 912.057227944 Z"/></g></g><g><g><rect fill="white" stroke="none" x="933.9189382222655" y="928.392431244" width="527.8569077482813" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="936.1807356022655" y="941.963215524" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. Send an HTTP request to the RP with the access_token in the header</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.0758700022656 947.994675204 L 1467.2041596825468 947.994675204" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1479.6189141905468,947.994675204) translate(-1479.6189141905468,-947.994675204)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1467.0533731905468 941.7119047040001 L 1479.6189141905468 947.994675204 L 1467.0533731905468 954.277445704 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1497.4619824105469" y="970.6126490040001" width="186.65692605882813" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="1497.4619824105469" y="985.6912982040001" width="288.3069199553125" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="1497.4619824105469" y="1000.769947404" width="157.54025735765626" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1499.7237797905468" y="984.1834332840001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">6. Authorization decision</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1499.7237797905468" y="999.2620824840001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    1. verify the access_token signature</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1499.7237797905468" y="1014.340731684" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    2. evaluate claims</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.6189141905468 1020.3721913640001 L 1539.933510990547 1020.3721913640001 L 1539.933510990547 1039.974435324 L 1492.0336686985468 1039.974435324" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1479.6189141905468,1039.974435324) translate(-1479.6189141905468,-1039.974435324)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1492.1844551905467 1033.691664824 L 1479.6189141905468 1039.974435324 L 1492.1844551905467 1046.257205824 Z"/></g></g><g><g><rect fill="white" stroke="none" x="957.4105916646483" y="1062.5924091240001" width="480.8736008635156" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="959.6723890446483" y="1076.1631934040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">7. Return the HTTP response, typically with 200, 201 status code</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1479.6189141905468 1082.194653084 L 928.4906245102655 1082.194653084" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(916.0758700022656,1082.194653084) translate(-916.0758700022656,-1082.194653084)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 928.6414110022656 1075.911882584 L 916.0758700022656 1082.194653084 L 928.6414110022656 1088.477423584 Z"/></g></g></g></g></svg>