<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1260" height="764"><desc>participant%20%22IdP%22%20as%20IdP%0Aparticipant%20%22Identity%20Propagation%20Proxy%20(IdPP)%22%20as%20Propagator%0Aparticipant%20%22RP%22%20as%20RP%0A%0Abottomparticipants%0A%0APropagator-%3EPropagator%3A1.%20Generate%20the%20actor_token%0APropagator-%3EPropagator%3A2.%20Generate%20the%20authentication_token%0AIdP%3C-Propagator%3A3.%20Send%20an%20HTTP%20request%20to%20get%20an%20identity_token%5Cn%20%20%20%20with%20the%20actor_token%20in%20the%20header%5Cn%20%20%20%20using%20the%20private_key_jwt%20client%20authentication%20method%0AIdP-%3EIdP%3A4.%20Authorization%20assessment%0A%0AIdP-%3EIdP%3A5.%20STS%20generates%20the%20identity_token%0APropagator%3C-IdP%3A6.%20Return%20the%20identity_token%0A%0APropagator-%3EPropagator%3A7.%20Generate%20the%20authentication_token%0APropagator-%3ERP%3A8.%20Send%20an%20HTTP%20request%20to%20the%20RP%5Cn%20%20%20%20with%20the%20identity_token%20in%20the%20header%5Cn%20%20%20%20using%20the%20private_key_jwt%20client%20authentication%20method%0ARP-%3ERP%3A9.%20Authorization%20assessment%0ARP-%3EPropagator%3A10.%20Return%20the%20HTTP%20response%2C%20typically%20with%20200%2C%20201%20status%20code%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1260" height="764"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 35.149658982000005 50.815047804 L 35.149658982000005 711.259882764" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 50.815047804 L 498.82606498668747 711.259882764" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1024.7191152784844 50.815047804 L 1024.7191152784844 711.259882764" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.539324600000004 10.253481456000003 L 62.75999336400001 10.253481456000003 L 62.75999336400001 50.815047804 L 7.539324600000004 50.815047804 L 7.539324600000004 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="23.899658982000005" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IdP</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 361.8490619035156 10.253481456000003 L 635.8030680698594 10.253481456000003 L 635.8030680698594 50.815047804 L 361.8490619035156 50.815047804 L 361.8490619035156 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="378.2093962855156" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Identity Propagation Proxy (IdPP)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 998.8337812779541 10.253481456000003 L 1050.6044492790147 10.253481456000003 L 1050.6044492790147 50.815047804 L 998.8337812779541 50.815047804 L 998.8337812779541 10.253481456000003 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1015.1941156599542" y="35.736398604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RP</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.539324600000004 711.259882764 L 62.75999336400001 711.259882764 L 62.75999336400001 751.8214491120001 L 7.539324600000004 751.8214491120001 L 7.539324600000004 711.259882764 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="23.899658982000005" y="736.742799912" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IdP</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 361.8490619035156 711.259882764 L 635.8030680698594 711.259882764 L 635.8030680698594 751.8214491120001 L 361.8490619035156 751.8214491120001 L 361.8490619035156 711.259882764 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="378.2093962855156" y="736.742799912" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Identity Propagation Proxy (IdPP)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 998.8337812779541 711.259882764 L 1050.6044492790147 711.259882764 L 1050.6044492790147 751.8214491120001 L 998.8337812779541 751.8214491120001 L 998.8337812779541 711.259882764 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1015.1941156599542" y="736.742799912" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RP</text></g></g><g><g><g><rect fill="white" stroke="none" x="516.6691332066875" y="80.972346204" width="211.32359781175782" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="518.9309305866875" y="94.543130484" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Generate the actor_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 100.574590164 L 559.1406617866875 100.574590164 L 559.1406617866875 120.17683412400001 L 511.24081949468746 120.17683412400001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(498.82606498668747,120.17683412400001) translate(-498.82606498668747,-120.17683412400001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 511.39160598668747 113.89406362400001 L 498.82606498668747 120.17683412400001 L 511.39160598668747 126.45960462400001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="516.6691332066875" y="142.794807924" width="280.17358865648436" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="518.9309305866875" y="156.365592204" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. Generate the authentication_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 162.397051884 L 559.1406617866875 162.397051884 L 559.1406617866875 181.99929584400002 L 511.24081949468746 181.99929584400002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(498.82606498668747,181.99929584400002) translate(-498.82606498668747,-181.99929584400002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 511.39160598668747 175.71652534400002 L 498.82606498668747 181.99929584400002 L 511.39160598668747 188.28206634400001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="52.99272720199999" y="204.617269644" width="365.9402512541406" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="52.99272720199999" y="219.695918844" width="277.0902756682031" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="52.99272720199999" y="234.774568044" width="427.9902695646875" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="55.25452458199999" y="218.188053924" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Send an HTTP request to get an identity_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="55.25452458199999" y="233.266703124" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    with the actor_token in the header</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="55.25452458199999" y="248.345352324" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    using the private_key_jwt client authentication method</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 254.37681200400002 L 47.56441349000001 254.37681200400002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(35.149658982000005,254.37681200400002) translate(-35.149658982000005,-254.37681200400002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 47.71519998200001 248.09404150400002 L 35.149658982000005 254.37681200400002 L 47.71519998200001 260.659582504 Z"/></g></g><g><g><rect fill="white" stroke="none" x="52.99272720200001" y="276.994785804" width="213.14026346117188" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="55.25452458200001" y="290.565570084" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Authorization assessment</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 35.149658982000005 296.597029764 L 95.46425578200001 296.597029764 L 95.46425578200001 316.199273724 L 47.56441349000001 316.199273724" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(35.149658982000005,316.199273724) translate(-35.149658982000005,-316.199273724)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 47.71519998200001 309.916503224 L 35.149658982000005 316.199273724 L 47.71519998200001 322.48204422400005 Z"/></g></g><g><g><rect fill="white" stroke="none" x="52.99272720200001" y="338.817247524" width="267.3736008635156" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="55.25452458200001" y="352.388031804" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. STS generates the identity_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 35.149658982000005 358.419491484 L 95.46425578200001 358.419491484 L 95.46425578200001 378.021735444 L 47.56441349000001 378.021735444" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(35.149658982000005,378.021735444) translate(-35.149658982000005,-378.021735444)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 47.71519998200001 371.738964944 L 35.149658982000005 378.021735444 L 47.71519998200001 384.304505944 Z"/></g></g><g><g><rect fill="white" stroke="none" x="162.15939895492969" y="400.639709244" width="209.65692605882813" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="164.42119633492968" y="414.21049352400007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">6. Return the identity_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 35.149658982000005 420.241953204 L 486.4113104786875 420.241953204" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(498.82606498668747,420.241953204) translate(-498.82606498668747,-420.241953204)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 486.2605239866875 413.959182704 L 498.82606498668747 420.241953204 L 486.2605239866875 426.52472370400005 Z"/></g></g><g><g><rect fill="white" stroke="none" x="516.6691332066875" y="442.85992700400004" width="280.17358865648436" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="518.9309305866875" y="456.43071128400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">7. Generate the authentication_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 462.46217096400005 L 559.1406617866875 462.46217096400005 L 559.1406617866875 482.06441492400006 L 511.24081949468746 482.06441492400006" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(498.82606498668747,482.06441492400006) translate(-498.82606498668747,-482.06441492400006)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 511.39160598668747 475.78164442400004 L 498.82606498668747 482.06441492400006 L 511.39160598668747 488.3471854240001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="547.7774553502422" y="504.6823887240001" width="257.6569260588281" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="547.7774553502422" y="519.7610379240001" width="295.27359476" height="19.602243960000003"/></g><g><rect fill="white" stroke="none" x="547.7774553502422" y="534.8396871240001" width="427.9902695646875" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="550.0392527302422" y="518.2531730040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">8. Send an HTTP request to the RP</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="550.0392527302422" y="533.3318222040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    with the identity_token in the header</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="550.0392527302422" y="548.4104714040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    using the private_key_jwt client authentication method</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 498.82606498668747 554.4419310840001 L 1012.3043607704844 554.4419310840001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1024.7191152784844,554.4419310840001) translate(-1024.7191152784844,-554.4419310840001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1012.1535742784844 548.1591605840001 L 1024.7191152784844 554.4419310840001 L 1012.1535742784844 560.7247015840001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1042.5621834984845" y="577.059904884" width="213.14026346117188" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1044.8239808784845" y="590.630689164" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">9. Authorization assessment</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1024.7191152784844 596.6621488440001 L 1085.0337120784843 596.6621488440001 L 1085.0337120784843 616.2643928040001 L 1037.1338697864844 616.2643928040001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1024.7191152784844,616.2643928040001) translate(-1024.7191152784844,-616.2643928040001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1037.2846562784844 609.9816223040001 L 1024.7191152784844 616.2643928040001 L 1037.2846562784844 622.547163304 Z"/></g></g><g><g><rect fill="white" stroke="none" x="516.6691332066875" y="638.882366604" width="490.20691385179686" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="518.9309305866875" y="652.453150884" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">10. Return the HTTP response, typically with 200, 201 status code</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1024.7191152784844 658.484610564 L 511.24081949468746 658.484610564" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(498.82606498668747,658.484610564) translate(-498.82606498668747,-658.484610564)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 511.39160598668747 652.2018400640001 L 498.82606498668747 658.484610564 L 511.39160598668747 664.767381064 Z"/></g></g></g></g></svg>