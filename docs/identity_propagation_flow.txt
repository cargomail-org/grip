participant "IdP" as IdP
participant "Identity Propagation Proxy (IdPP)" as Propagator
participant "RP" as RP

bottomparticipants

Propagator->Propagator:1. Generate the actor_token
Propagator->Propagator:2. Generate the authentication_token
IdP<-Propagator:3. Send an HTTP request to get an identity_token\n    with the actor_token in the header\n    using the private_key_jwt client authentication method
IdP->IdP:4. Authorization assessment

IdP->IdP:5. STS generates the identity_token
Propagator<-IdP:6. Return the identity_token

Propagator->Propagator:7. Generate the authentication_token
Propagator->RP:8. Send an HTTP request to the RP\n    with the identity_token in the header\n    using the private_key_jwt client authentication method
RP->RP:9. Authorization assessment
RP->Propagator:10. Return the HTTP response, typically with 200, 201 status code
